<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>MD Imran Hssen</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-dark:#0b1220; --bg-light:#f9fafb; --card-dark:#141c2f; --card-light:#ffffff;
  --text-dark:#e6eef8; --text-light:#111827; --accent:#4f46e5; --ok:#10b981; --danger:#ef4444;
  --muted-dark:#94a3b8; --muted-light:#6b7280;
}
*{box-sizing:border-box;transition:all .3s ease;}
body{font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;margin:0;padding:24px;text-align:center;background:var(--bg-dark);color:var(--text-dark);}
body.light{background:var(--bg-light);color:var(--text-light);}
h1{font-size:36px;margin-bottom:12px;font-weight:700;}
.sub{color:var(--muted-dark);font-size:16px;margin-bottom:20px;}
body.light .sub{color:var(--muted-light);}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;}
.card{background:var(--card-dark);border-radius:14px;padding:16px;box-shadow:0 6px 18px rgba(0,0,0,0.4);}
body.light .card{background:var(--card-light);box-shadow:0 4px 10px rgba(0,0,0,0.1);}
.switch-row{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px;}
.big-toggle{border:0;padding:10px 16px;border-radius:999px;font-weight:600;cursor:pointer;}
.toggle-on{background:var(--ok);color:#042014;}
.toggle-off{background:#14202a;color:var(--muted-dark);}
body.light .toggle-off{background:#e5e7eb;color:var(--muted-light);}
.controls{display:flex;gap:8px;justify-content:center;margin-top:6px;}
input[type=number]{width:60px;padding:6px;border-radius:8px;border:1px solid rgba(255,255,255,0.1);background:transparent;color:inherit;text-align:center;}
body.light input{border:1px solid #d1d5db;}
button{cursor:pointer;border-radius:8px;border:0;padding:8px 10px;font-weight:500;}
.btn-primary{background:var(--accent);color:white;}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.1);color:var(--muted-dark);}
body.light .btn-ghost{border:1px solid #d1d5db;color:var(--muted-light);}
.countdown{font-family:monospace;font-size:18px;margin-top:8px;}
.progress-bar{width:100%;height:8px;background:#333;border-radius:4px;margin-top:6px;overflow:hidden;}
.progress-fill{height:100%;width:0%;background:var(--ok);}
.footer{margin-top:20px;display:flex;gap:8px;justify-content:center;flex-wrap:wrap;}
.small{font-size:13px;color:var(--muted-dark);}
body.light .small{color:var(--muted-light);}
.global-reset{background:var(--danger);color:white;}
.theme-toggle{position:fixed;top:16px;right:16px;padding:8px 12px;border-radius:20px;background:var(--accent);color:white;border:0;cursor:pointer;}
.on-label{font-weight:600;}
</style>
</head>
<body>
<button class="theme-toggle">üåô</button>
<h1>MD Imran Hossen</h1>
<div class="sub">4 Switch Timer Panel ‚Äî Modern Interface</div>

<div class="grid" id="grid"></div>

<div class="footer">
  <button id="globalStart" class="btn-primary">‚ñ∂ Global Start</button>
  <button id="globalStop" class="btn-ghost">‚è∏ Global Stop</button>
  <button id="globalReset" class="global-reset">‚ôªÔ∏è Global Reset</button>
</div>
<div class="small" style="margin-top:10px;">‡¶è‡¶á ‡¶™‡ßá‡¶ú‡¶ü‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßá ‡¶ñ‡ßÅ‡¶≤‡¶≤‡ßá‡¶á ‡¶ö‡¶≤‡¶¨‡ßá‡•§</div>

<script>
const channels=[0,1,2,3].map(i=>({id:i,name:`Switch ${i+1}`,on:false,timerMs:0,remaining:0,intervalId:null,running:false}));
const grid=document.getElementById('grid');
const fmt=ms=>{const s=Math.floor(ms/1000);const hh=Math.floor(s/3600),mm=Math.floor((s%3600)/60),ss=s%60;const pad=n=>n.toString().padStart(2,'0');return `${pad(hh)}:${pad(mm)}:${pad(ss)}`;};

function createCard(ch){
  const el=document.createElement('div'); el.className='card';
  el.innerHTML=`
    <div class="switch-row">
      <div><div class="on-label">${ch.name}</div><div class="small">Status: <span class="status">OFF</span></div></div>
      <button class="big-toggle toggle-off">OFF</button>
    </div>
    <div>
      <div class="small">‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ (‡¶ò:‡¶Æ‡¶ø‡¶®:‡¶∏‡ßá‡¶ï)</div>
      <div class="controls">
        <input type="number" class="hr" min="0" value="0">:
        <input type="number" class="min" min="0" value="0">:
        <input type="number" class="sec" min="0" value="0">
      </div>
      <div style="margin-top:8px;">
        <button class="btn-primary startBtn">‚ñ∂ Start</button>
        <button class="btn-ghost stopBtn">‚è∏ Stop</button>
        <button class="btn-ghost resetBtn">üîÑ Reset</button>
      </div>
      <div class="countdown">‚è± <span class="cd">00:00:00</span></div>
      <div class="progress-bar"><div class="progress-fill"></div></div>
    </div>`;
    
  const toggleBtn=el.querySelector('.big-toggle'),
        status=el.querySelector('.status'),
        hr=el.querySelector('.hr'),
        min=el.querySelector('.min'),
        sec=el.querySelector('.sec'),
        startBtn=el.querySelector('.startBtn'),
        stopBtn=el.querySelector('.stopBtn'),
        resetBtn=el.querySelector('.resetBtn'),
        cd=el.querySelector('.cd'),
        fill=el.querySelector('.progress-fill');

  const updateUI=()=>{ 
    toggleBtn.textContent=ch.on?'ON':'OFF'; 
    toggleBtn.className='big-toggle '+(ch.on?'toggle-on':'toggle-off'); 
    status.textContent=ch.on?'ON':'OFF'; 
    cd.textContent=fmt(ch.remaining); 
    fill.style.width = ch.timerMs>0?((ch.timerMs-ch.remaining)/ch.timerMs*100)+'%':'0%';
  };

  toggleBtn.addEventListener('click',()=>{ ch.on=!ch.on; updateUI(); });
  startBtn.addEventListener('click',()=>{
    const h=+hr.value||0,m=+min.value||0,s=+sec.value||0;
    const total=((h*60+m)*60+s)*1000;
    if(total<=0)return alert('‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® (0 ‡¶è‡¶∞ ‡¶ö‡ßá‡ßü‡ßá ‡¶¨‡ßú)');
    ch.timerMs=total; ch.remaining=total; ch.running=true; ch.on=true;
    startInterval(ch,updateUI); updateUI();
  });
  stopBtn.addEventListener('click',()=>{ stopInterval(ch); ch.running=false; updateUI(); });
  resetBtn.addEventListener('click',()=>{
    stopInterval(ch); ch.remaining=0; ch.timerMs=0; ch.running=false; ch.on=false; hr.value=0; min.value=0; sec.value=0; updateUI();
  });

  ch._updateUI=updateUI;
  updateUI();
  return el;
}

function startInterval(ch,cb){
  stopInterval(ch);
  let last=Date.now();
  ch.intervalId=setInterval(()=>{
    const now=Date.now(); 
    const elapsed=now-last; 
    last=now; 
    ch.remaining=Math.max(0,ch.remaining-elapsed); 
    if(ch.remaining<=0){ 
      stopInterval(ch); ch.running=false; ch.on=false; cb(); 
      try{new Audio('https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3').play();}catch(e){}
      if(Notification.permission==='granted') new Notification(`${ch.name} ‡¶ü‡¶æ‡¶á‡¶Æ‡¶æ‡¶∞ ‡¶∂‡ßá‡¶∑!`);
      return;
    } 
    cb(); 
  },250);
}

function stopInterval(ch){ if(ch.intervalId){ clearInterval(ch.intervalId); ch.intervalId=null; } }

channels.forEach(ch=>grid.appendChild(createCard(ch)));

// Global Buttons
document.getElementById('globalStart').onclick=()=>channels.forEach(ch=>{ch._updateUI(); document.querySelectorAll('.startBtn')[ch.id].click();});
document.getElementById('globalStop').onclick=()=>channels.forEach(ch=>{document.querySelectorAll('.stopBtn')[ch.id].click();});
document.getElementById('globalReset').onclick=()=>channels.forEach(ch=>{document.querySelectorAll('.resetBtn')[ch.id].click();});

// Auto Save & Load
function saveState(){ 
  const dump=channels.map(c=>({id:c.id,on:c.on,timerMs:c.timerMs,remaining:c.remaining,running:c.running}));
  localStorage.setItem('switchState',JSON.stringify(dump));
}
function loadState(){
  const s=localStorage.getItem('switchState'); 
  if(!s)return; 
  const dump=JSON.parse(s);
  dump.forEach(d=>{ const c=channels.find(x=>x.id===d.id); Object.assign(c,d); if(c.running&&c.remaining>0)startInterval(c,c._updateUI); c._updateUI();});
}
window.addEventListener('beforeunload',saveState);
loadState();

// Theme Toggle
const themeBtn=document.querySelector('.theme-toggle'); 
themeBtn.onclick=()=>{document.body.classList.toggle('light'); themeBtn.textContent=document.body.classList.contains('light')?'üåû':'üåô';};

// Request Notification Permission
if('Notification' in window && Notification.permission!=='granted') Notification.requestPermission();
</script>
</body>
</html>


